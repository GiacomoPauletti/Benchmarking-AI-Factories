Bootstrap: docker
From: python:3.11-slim

%files
    ../services/client/src /workspace/src
    ../services/shared /workspace/shared

%post
    # Install system dependencies
    apt-get update && apt-get install -y \
        curl \
        netcat-openbsd \
        && rm -rf /var/lib/apt/lists/*

    # Install Python dependencies
    pip install --no-cache-dir \
        fastapi \
        uvicorn \
        httpx \
        pyyaml \
        pydantic

%environment
    export PYTHONPATH=/workspace/src:/workspace/shared
    export SERVICE_NAME=client
    export SERVICE_PORT=8002
    export SERVER_SERVICE_URL=http://localhost:8001

%runscript
    cd /workspace
    exec uvicorn src.main:app --host 0.0.0.0 --port ${SERVICE_PORT}

%startscript
    cd /workspace
    uvicorn src.main:app --host 0.0.0.0 --port ${SERVICE_PORT} &

%labels
    Author AI Factory Team
    Version 1.0.0
    Service client-service