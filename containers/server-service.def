# Create the server service Apptainer definition
cat > services/server/server.def << 'EOF'
Bootstrap: docker
From: python:3.9-slim

%files
    src /app/src
    requirements.txt /app/requirements.txt

%post
    cd /app
    pip install --no-cache-dir -r requirements.txt

%runscript
    cd /app
    python -m src.main

%startscript
    cd /app
    python -m src.main

%environment
    export PYTHONPATH=/app:$PYTHONPATH

%labels
    Author Jan Marxen
    Version 1.0
    Description AI Factory Server Service

%help
    This container runs the AI Factory Server Service
    It provides REST API endpoints for managing AI workloads
EOF