{
  "datasource": {
    "type": "prometheus",
    "uid": "prom"
  },
  "title": "Time To First Token (TTFT)",
  "type": "timeseries",
  "id": 102,
  "gridPos": {
    "h": 8,
    "w": 12,
    "x": 12,
    "y": 6
  },
  "targets": [
    {
      "expr": "rate(vllm:time_to_first_token_seconds_sum{service_id=\"$service\", replica_id=~\"$replicas\"}[$__interval]) / rate(vllm:time_to_first_token_seconds_count{service_id=\"$service\", replica_id=~\"$replicas\"}[$__interval])",
      "legendFormat": "Avg TTFT - {{replica_id}}",
      "refId": "A"
    },
    {
      "expr": "histogram_quantile(0.99, sum by(le, replica_id) (rate(vllm:time_to_first_token_seconds_bucket{service_id=\"$service\", replica_id=~\"$replicas\"}[$__interval])))",
      "legendFormat": "P99 TTFT - {{replica_id}}",
      "refId": "B"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "unit": "s"
    }
  }
}