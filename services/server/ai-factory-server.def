Bootstrap: docker
From: python:3.11-slim

%files
    requirements.txt /app/requirements.txt
    src/ /app/

%post
    # Install Python dependencies without apt-get to avoid permission issues
    cd /app
    pip install --no-cache-dir -r requirements.txt

%environment
    export PORT=8001

%runscript
    echo "Starting FastAPI app..."
    cd /app/src
    python -m uvicorn main:app --host 0.0.0.0 --port ${PORT:-8001}
